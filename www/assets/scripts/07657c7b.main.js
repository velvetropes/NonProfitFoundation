(function(){var sfControllers;sfControllers=angular.module("sfControllers",[]),sfControllers.config(["$sceProvider",function($sceProvider){return $sceProvider.enabled(!1)}]),sfControllers.controller("globalCtrl",["$scope",function($scope){return $scope.showModal=!1,$scope.videoIframe="",$scope.showSubscribeForm=!1,$scope.$on("modal:hide",function(){return $scope.showModal=!1}),$scope.$on("modal:show",function(event,url){return $scope.showModal=!$scope.showModal,$scope.showModal===!0?$scope.videoIframe=url:void 0}),$scope.toggleSubscribeForm=function(){return $scope.showSubscribeForm=!$scope.showSubscribeForm},$scope.openSubscribeForm=function(){return $scope.showSubscribeForm=!0}}]),sfControllers.controller("HomeIndexBottomTabsCtrl",["$scope","MapMarker","FeaturedArticle",function($scope,MapMarker,FeaturedArticle){return FeaturedArticle.getIndex().then(function(data){return $scope.featuredArticlesHash=data}),MapMarker.getIndex().then(function(data){return $scope.markers=data}),$scope.currentBottomSlideTab=1,$scope.currentTabModel={},$scope.changeCurrentTab=function(tabIndex){return 0===tabIndex?$scope.currentBottomSlideTab=1:($scope.currentBottomSlideTab=2,$scope.currentTabModel=$scope.featuredArticlesHash.articles[tabIndex-1])},$scope.modalShown=!1,$scope.toggleModal=function(){return $scope.modalShown=!$scope.modalShown}}]),sfControllers.controller("BlogIndexCtrl",["$scope","$window","Articles","Pagination",function($scope,$window,Articles,Pagination){var currentPageCollection,isMobile;return $scope.articles=[],$scope.nonFeaturedArticles=[],$scope.articleFilters={featured:"false",blog_item_category:"",year:""},$scope.windowWidth=$window.innerWidth,$scope.articleCategories=[{name:"All",tag:""},{name:"News",tag:"News"},{name:"Events",tag:"Events"},{name:"Hear Now",tag:"Hear Now"},{name:"Gala",tag:"Gala"},{name:"Films",tag:"Films"},{name:"Celebrity",tag:"Celebrity"},{name:"Operation Change",tag:"Operation Change"},{name:"Hearing Missions",tag:"Hearing Missions"},{name:"Listen Carefully",tag:"Listen Carefully"}],$scope.articleYears=[{name:"Latest",tag:""},{name:"2014",tag:"2014"},{name:"2013",tag:"2013"},{name:"2012",tag:"2012"},{name:"2011",tag:"2011"},{name:"2010",tag:"2010"}],Articles.getIndex().then(function(data){return $scope.articles=data instanceof Array?data:[data],$scope.pagination=Pagination.getNew(9),$scope.nonFeaturedArticles=_.filter($scope.articles,function(article){return"false"===article.featured}),$scope.pagination.numPages=Math.ceil($scope.nonFeaturedArticles.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.nonFeaturedArticles.length/$scope.pageSize)},$scope.parseDate=function(date){return Date.parse(date)},$scope.loadMore=function(){return $scope.pagination.nextPage()},isMobile=function(){return $scope.windowWidth<768},$scope.pageStart=function(){return null!=$scope.pagination?isMobile()?0:currentPageCollection():void 0},$scope.pageEnd=function(){return null!=$scope.pagination?isMobile()?($scope.pagination.page+1)*$scope.pagination.perPage:$scope.pagination.perPage:void 0},currentPageCollection=function(){return $scope.pagination.page*$scope.pagination.perPage},$scope.isAtPaginationEnd=function(){return $scope.nonFeaturedArticles.length===$scope.pageEnd()}}]),sfControllers.controller("BlogShowCtrl",["$scope","$routeParams","$location","$sce","Articles","Article","Pagination",function($scope,$routeParams,$location,$sce,Articles,Article,Pagination){return $scope.currentPosition=$routeParams.articleId,$scope.articles=[],Articles.getIndex().then(function(data){return $scope.articles=data instanceof Array?data:[data],$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.articles.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.articles.length/$scope.pageSize)}}]),sfControllers.controller("GalaCtrl",["$scope","$routeParams","GalaItems","GalaTabs",function($scope,$routeParams,GalaItems,GalaTabs){return GalaItems.getIndex().then(function(data){return $scope.timelineItems=data}),GalaTabs.getIndex().then(function(data){return $scope.galaTabs=data})}]),sfControllers.controller("LegalPagesCtrl",["$scope","$routeParams",function($scope){return $scope.currentTab=0}]),sfControllers.controller("MediaMentionsIndexCtrl",["$scope","MediaMentionOrPressItem","Pagination",function($scope,MediaMentionOrPressItem,Pagination){return $scope.articleFilters={featured:"",year:"",type:""},$scope.articleCategories=[{name:"All Articles",tag:""},{name:"Press Release",tag:"press_release"},{name:"Media Mention",tag:"media_mention"}],$scope.articleYears=[{name:"Latest",tag:""},{name:"2014",tag:"2014"},{name:"2013",tag:"2013"},{name:"2012",tag:"2012"},{name:"2011",tag:"2011"},{name:"2010",tag:"2010"}],$scope.pressItems=[],MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("MediaMentionsShowCtrl",["$scope","$routeParams","MediaMention","MediaMentionOrPressItem","Pagination",function($scope,$routeParams,MediaMention,MediaMentionOrPressItem,Pagination){return $scope.article={prev_item:"",next_item:""},$scope.currentPosition=$routeParams.articleId,$scope.pressItems=[],MediaMention.get({mediaMentionId:$routeParams.mediaMentionId},function(pressItem){return $scope.article=pressItem instanceof Array?pressItem[0]:pressItem}),MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("MissionsPageCtrl",["$scope","MissionsMapMarker","MissionsPage",function($scope,MissionsMapMarker,MissionsPage){return $scope.currentTab=0,MissionsMapMarker.getIndex().then(function(data){return $scope.data=data}),MissionsPage.getPage().then(function(data){return $scope.missions=data,$scope.statistics=$scope.missions.hearing_mission_statistics,$scope.content_tabs=$scope.missions.content_tabs,$scope.highlights=$scope.missions.highlights}),$scope.changeTab=function(tabId){return $scope.currentTab=tabId}}]),sfControllers.controller("MissionsIndexCtrl",["$scope","Pagination","MissionsIndex",function($scope,Pagination,MissionsIndex){return $scope.highlightRegions=[],$scope.currentRegion={},$scope.missionsHighlights=[],$scope.currentCountry="",$scope.highlightsFilters={year:"",region:"",country:""},$scope.highlightYears=[{name:"Latest",tag:""}],MissionsIndex.getIndex().then(function(data){var addedYear,year,_i,_len,_ref,_results;for($scope.missionsHighlights=data.highlights,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.missionsHighlights.length/$scope.pagination.perPage),$scope.highlightRegions=data.categories,_ref=data.years,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)year=_ref[_i],addedYear={name:year,tag:year},_results.push($scope.highlightYears.push(addedYear));return _results}),$scope.hideCountryDropdown=function(){return""===$scope.highlightsFilters.region},$scope.$watch("currentRegion",function(newVal){var _ref;return(null!=newVal?null!=(_ref=newVal.region)?_ref.length:void 0:void 0)>0?($scope.highlightsFilters.region=newVal.region,$scope.highlightsFilters.country=""):$scope.highlightsFilters.region=""}),$scope.numberOfPages=function(){return Math.ceil($scope.missionsHighlights.length/$scope.pageSize)}}]),sfControllers.controller("MissionsShowCtrl",["$scope","$routeParams","$location","Articles","HearingMissionArticle","Pagination",function(){}]),sfControllers.controller("PressReleasesShowCtrl",["$scope","$routeParams","PressRelease","MediaMentionOrPressItem","Pagination",function($scope,$routeParams,PressRelease,MediaMentionOrPressItem,Pagination){return $scope.article={prev_item:"",next_item:""},$scope.currentPosition=$routeParams.pressReleaseId,$scope.pressItems=[],PressRelease.get({pressReleaseId:$routeParams.pressReleaseId},function(pressItem){return $scope.article=pressItem instanceof Array?pressItem[0]:pressItem}),MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("ProgramsCtrl",["$scope","$routeParams","Articles","ProgramPartnership","ProgramResource",function($scope,$routeParams){return $scope.currentTab=$routeParams}]),sfControllers.controller("TakeActionCtrl",["$scope","$routeParams",function($scope,$routeParams){return $scope.currentTab=$routeParams,$scope.showForm=!1,$scope.toggleForm=function(){return $scope.showForm=!$scope.showForm}}]),sfControllers.controller("PreviewShowCtrl",["$scope","$routeParams","$sce","Preview",function($scope,$routeParams,$sce,Preview){return console.debug("PreviewShowCtrl"),Preview.getDetail($routeParams.articleId).then(function(data){return $scope.article=data})}])}).call(this),function(){var sfDirectives;sfDirectives=angular.module("sfDirectives",["ngSanitize","sfFilters"]),sfDirectives.directive("accordion",[function(){var template;return template='<div class="accordion" ng-transclude></div>',{restrict:"EA",replace:!0,transclude:!0,template:template,controller:function(){var expanders;expanders=[],this.gotOpened=function(selectedExpander){angular.forEach(expanders,function(expander){selectedExpander!==expander&&(expander.showMe=!1)})},this.addExpander=function(expander){expanders.push(expander)}}}}]),sfDirectives.directive("accordionList",[function(){var link,template;return link=function(){},template='<div class="accordion-list">\n  <h3>{{title}}</h3>\n  <ul ng-transclude></ul>\n</div>',{restrict:"E",replace:!0,transclude:!0,template:template,link:link,scope:{title:"@"}}}]),sfDirectives.directive("accordionListItem",[function(){var link,template;return link=function(){},template='<li class="accordion-list-item">\n  <h3>{{title}}</h3>\n  <h3>{{subhead}}</h3>\n  <div ng-transclude></div>\n</li>',{restrict:"E",replace:!0,transclude:!0,template:template,link:link,scope:{title:"@",subhead:"@"}}}]),sfDirectives.directive("detailPage",["$timeout","$compile",function(){var link,result;return link=function(scope){return null==scope.author&&(scope.author=""),null==scope.body&&(scope.body=""),null==scope.category&&(scope.category=""),null==scope.date&&(scope.date=""),null==scope.detailPageType&&(scope.detailPageType=""),null==scope.hasRelatedPosts&&(scope.hasRelatedPosts=""),null==scope.headerImageUrl&&(scope.headerImageUrl=""),null==scope.previousPageId&&(scope.previousPageId=""),null==scope.nextPageId&&(scope.nextPageId=""),null==scope.shareThis&&(scope.shareThis=""),null==scope.subhead&&(scope.subhead=""),null==scope.thumbnailImageUrl&&(scope.thumbnailImageUrl=""),null!=scope.title?scope.title:scope.title=""},result={restrict:"E",replace:!0,templateUrl:function(){return"templates/blog_detail_page.html"},link:link,scope:{author:"@",body:"@",category:"@",date:"@",detailPageType:"@",hasRelatedPosts:"@",headerImageUrl:"@",previousPageId:"@",nextPageId:"@",shareThis:"@",subhead:"@",thumbnailImageUrl:"@",title:"@"}}}]),sfDirectives.directive("expander",[function(){var template;return template='<div>\n  <a class="title" href ng-click="toggle()" ng-class="{active: showMe==true}">{{title}} <span class="arrow">&gt;</span></a>\n  <div class="body reveal" ng-show="showMe" ng-transclude>\n  </div>\n</div>',{restrict:"EA",replace:!0,transclude:!0,require:"^?accordion",template:template,link:function(scope,element,attrs,accordionController){var toggle;scope.showMe=!1,accordionController.addExpander(scope),scope.toggle=toggle=function(){scope.showMe=!scope.showMe,accordionController.gotOpened(scope)}},scope:{title:"@"}}}]),sfDirectives.directive("dynamic",["$compile",function($compile){return{restrict:"A",replace:!0,link:function(scope,element,attrs){return scope.$watch(attrs.dynamic,function(html){return element.html(html),$compile(element.contents())(scope)})}}}]),sfDirectives.directive("facebook",["$timeout","$http",function($timeout,$http){return{restrict:"E",scope:{url:"@",caption:"@"},replace:!0,template:'<div class="facebook-fans centered">\n    <h1>{{shares}} <strong>fans</strong></h1>\n  <p class="read-more"><a href>Like us â†’</a></p>\n</div>',link:function(scope,element){return scope.shares=0,$http.get("https://api.facebook.com/method/links.getStats?urls="+scope.url+"&format=json").success(function(res){return scope.shares=res[0].share_count}).error(function(){return scope.shares=0}),$timeout(function(){return element.bind("click",function(){return FB.ui({method:"feed",name:"Facebook shares",link:scope.url,caption:scope.caption})})})}}}]),sfDirectives.directive("galaThumblistNav",["$http","$sce",function($http){var config,controller,link;return config={},link=function(scope){return setTimeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400)},controller=function($scope){return $scope.getItem=function(url){return $http.get("/api/gala_item/"+url).then(function(response){return $scope.rawHtml=response.data})}},{controller:controller,restrict:"E",link:link,templateUrl:"templates/gala_thumblist_nav.html",replace:!0,scope:{items:"="}}}]),sfDirectives.directive("gallery",["$timeout",function($timeout){var link,template;return link=function(scope,element){var config,_ref;return null==scope.slides&&(scope.slides=1),scope.isThumblist=function(){return scope.slides>1},config={showArrows:!0},scope.isThumblist()&&$timeout(function(){return scope.pane=$(".gallery"),scope.pane.jScrollPane(config)},1400),scope.isFullHeight=function(){var _ref;return(null!=(_ref=scope.full)?_ref.length:void 0)>0&&"true"===scope.full},scope.galleryClasses=function(){return scope.isThumblist()?"gallery":"single-image-gallery"},(null!=(_ref=element.parent())?_ref.is("p"):void 0)?element.parent().addClass("no-container"):void 0},template='<div ng-class="galleryClasses()" ng-transclude></div>',{restrict:"E",link:link,template:template,transclude:!0,replace:!0,scope:{slides:"@"}}}]),sfDirectives.directive("gallerySlide",[function(){var link,result;return link=function(scope){return null==scope.imageUrl&&(scope.imageUrl=""),null==scope.videoUrl&&(scope.videoUrl=""),scope.youtubePattern=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]{11,11}).*$/,scope.youtubeId=function(){return scope.videoUrl.match(scope.youtubePattern)[1]},scope.hasImageUrl=function(){var _ref;return(null!=(_ref=scope.imageUrl)?_ref.length:void 0)>0},scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoUrl)?_ref.length:void 0)>0},scope.getYoutubeVideoThumbnail=function(){return scope.hasVideo()?"http://img.youtube.com/vi/"+scope.youtubeId()+"/1.jpg":void 0},scope.getImage=function(){return scope.imageUrl||scope.getYoutubeVideoThumbnail()},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoUrl):void 0},scope.slideType=function(){return scope.hasVideo()?"links_to_video":"plain_image"},scope.backgroundImageStyle={"background-image":"url("+scope.getImage()+")","background-size":"cover"}},result={restrict:"E",replace:!0,templateUrl:"templates/gallery_slide.html",link:link,scope:{imageUrl:"@",videoUrl:"@"}}}]),sfDirectives.directive("homeThumblistNav",[function(){var link;return link=function(scope){var config;return config={showArrows:!1},setTimeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400)},{restrict:"E",link:link,templateUrl:"templates/home_thumblist_nav.html",replace:!0,scope:{featured:"=",clickaction:"="}}}]),sfDirectives.directive("instagramGallery",["$http","Instagram",function($http,Instagram){return{restrict:"E",scope:{},replace:!0,template:"<ul class='thumbs'>\n  <li ng-repeat=\"p in pics\">\n    <a href=\"{{p.link}}\" target=\"_blank\" ng-style=\"{'background-image': 'url(' + p.images.thumbnail.url + ')'}\">&nbsp;</a>\n  </li>\n</ul>\n",link:function(scope){return scope.pics=[],Instagram.fetchLatest(function(data){return scope.pics=data})}}}]),sfDirectives.directive("latestBlogPost",["$http","LatestBlog",function($http,LatestBlog){return{restrict:"E",scope:{},replace:!0,template:'<div>\n  <h4>From our blog</h4>\n  <p>{{article.title}}</p>\n  <p>{{article.date}}</p>\n  <p class="read-more"><a href="/blog#articles/{{article.id}}">Check out our blog &rarr;</a></p>\n</div>',link:function(scope){return scope.article={},LatestBlog.fetchLatest().then(function(data){return scope.article=data})}}}]),sfDirectives.directive("missionsMap",["$timeout",function($timeout){var controller,link;return link=function(scope){return scope.worldMapObject={},scope.usMapObject={},scope.worldMapZIndex=1,scope.usMapZIndex=0,scope.currentContinent={},scope.currentCountry={},scope.selectedList={},scope.greetingFlag=!1,scope.mapConfig={zoomOnScroll:!1,backgroundColor:"none",regionStyle:{selected:{fill:"#ffad20"}},focusOn:{x:.5,y:.5,scale:.5}},scope.worldMapConfig=_.extend({map:"world_mill_en"},scope.mapConfig),scope.usMapConfig=_.extend({map:"us_aea_en"},scope.mapConfig),scope.selectTopLevelList=function(continent){return scope.selectedList=continent,scope.greetingFlag=!0},scope.initializeMaps=function(){return $timeout(function(){return $("#missions-world-map").vectorMap(scope.worldMapConfig),scope.worldMapObject=$("#missions-world-map").vectorMap("get","mapObject"),$("#missions-us-map").vectorMap(scope.usMapConfig),scope.usMapObject=$("#missions-us-map").vectorMap("get","mapObject")},1800)},scope.hasContinentAndCountry=function(){return scope.hasContinent()||scope.hasCountry()},scope.hasContinent=function(){var _ref;return null!=(null!=(_ref=scope.currentContinent)?_ref.name:void 0)},scope.hasCountry=function(){var _ref;return null!=(null!=(_ref=scope.currentCountry)?_ref.name:void 0)},scope.countryClass=function(name){return(null!=name?name.length:void 0)?"US"===name?"states":"countries":void 0},scope.countryOrState=function(){return scope.hasContinent()?scope.countryClass(scope.currentContinent.name):void 0},scope.highlightContinentRegions=function(continent,mapObj){var country,countryCodes,_i,_len,_ref;for(scope.currentContinent=continent,scope.currentCountry={},countryCodes=[],_ref=continent.countries_visited,_i=0,_len=_ref.length;_len>_i;_i++)country=_ref[_i],countryCodes.push(country.abbreviation);return countryCodes.length>0?(mapObj.clearSelectedRegions(),mapObj.setFocus(countryCodes,.2),mapObj.setSelectedRegions(countryCodes)):void 0},scope.highlightCountryRegion=function(country,mapObj){return scope.currentCountry=country,mapObj.clearSelectedRegions(),mapObj.setFocus(country.abbreviation),mapObj.setSelectedRegions(country.abbreviation)},scope.bringUSMapToFront=function(flag,continent){return flag===!0?(scope.worldMapZIndex=0,scope.usMapZIndex=1,scope.highlightContinentRegions(continent,scope.usMapObject)):(scope.worldMapZIndex=1,scope.usMapZIndex=0,scope.highlightContinentRegions(continent,scope.worldMapObject))},scope.greetingClicked=function(){return scope.greetingFlag=!0},scope.initializeMaps()},controller=function($scope){return $scope.showContinent=function(continent){return"US"===continent.name?$scope.bringUSMapToFront(!0,continent):$scope.bringUSMapToFront(!1,continent)},$scope.showCountry=function(country,continent){var countryCode,_ref;return countryCode=country.abbreviation,(null!=countryCode?countryCode.length:void 0)>0&&(null!=(_ref=country.total_hearing_aids_provided)?_ref.length:void 0)>0?"US"===continent.name?($scope.bringUSMapToFront(!0,continent),$scope.highlightCountryRegion(country,$scope.usMapObject)):($scope.bringUSMapToFront(!1,continent),$scope.highlightCountryRegion(country,$scope.worldMapObject)):void 0}},{restrict:"E",link:link,controller:controller,templateUrl:"templates/missions_map.html",replace:!0,scope:{data:"="}}}]),sfDirectives.directive("pageTile",[function(){var link,result;return link=function(scope){return null==scope.feedUrl&&(scope.feedUrl=""),null==scope.title&&(scope.title=""),null==scope.date&&(scope.date=""),null==scope.year&&(scope.year=""),null==scope.detailPage&&(scope.detailPage=""),null==scope.type&&(scope.type=""),null==scope.featured&&(scope.featured=""),null==scope.headerImageUrl&&(scope.headerImageUrl=""),null==scope.logoImageUrl&&(scope.logoImageUrl=""),null==scope.quote&&(scope.quote=""),null==scope.callToActionText&&(scope.callToActionText=""),null==scope.callToActionLink&&(scope.callToActionLink=""),null==scope.videoLink&&(scope.videoLink=""),scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoLink)?_ref.length:void 0)>0},scope.getCategory=function(){switch(scope.type){case"press_release":return"Press Release";case"media_mention":return"Media Mention";default:return scope.category}},scope.parseDate=function(date){return Date.parse(date)},scope.linkByType=function(){var _ref,_ref1;return null!=scope.type?"media_mention"===scope.type?(null!=(_ref=scope.videoLink)?_ref.length:void 0)>0?"media_mention_with_video":(null!=(_ref1=scope.detailPage)?_ref1.length:void 0)>0&&"true"===scope.detailPage?"media_mention_with_detail_page":"media_mention":scope.type:"default"},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoLink):void 0}},result={restrict:"E",replace:!0,templateUrl:"templates/page_tile.html",link:link,scope:{id:"@",callToActionLink:"@",callToActionText:"@",category:"@",date:"@",detailPage:"@",featured:"@",feedUrl:"@",headerImageUrl:"@",logoImageUrl:"@",quote:"@",title:"@",type:"@",videoLink:"@",year:"@"}}}]),sfDirectives.factory("Pagination",function(){var pagination;return pagination={},pagination.getNew=function(perPage){var paginator;return perPage=void 0===perPage?5:perPage,paginator={numPages:1,perPage:perPage,page:0},paginator.prevPage=function(){return paginator.page>0?paginator.page-=1:void 0},paginator.nextPage=function(){return paginator.page<paginator.numPages-1?paginator.page+=1:void 0},paginator.toPageId=function(id){return id>=0&&id<=paginator.numPages-1?paginator.page=id:void 0},paginator},pagination}),sfDirectives.directive("panelTab",[function(){var link;return link=function(scope){return scope.hasVideo=function(){var _ref;return null!=(null!=(_ref=scope.featured)?_ref.video_link_url:void 0)},scope.displayInModalIfVideo=function(){return scope.$emit("modal:show",scope.featured.video_link_url)}},{restrict:"E",templateUrl:"templates/panel_tab.html",replace:!0,link:link,scope:{featured:"="}}}]),sfDirectives.directive("scrollToPosition",[function(){return{restrict:"A",link:function(scope,element,attrs){var idToScrollTo;return idToScrollTo=attrs.scrollToPosition,element.on("click",function(){return $("body").animate({scrollTop:$("#"+idToScrollTo).offset().top},"slow")})},scope:{}}}]),sfDirectives.directive("slide",[function(){var controller,link,result;return link=function(scope){return null==scope.detailPage&&(scope.detailPage=""),null==scope.imageUrl&&(scope.imageUrl=""),null==scope.videoUrl&&(scope.videoUrl=""),null==scope.linkUrl&&(scope.linkUrl=""),null==scope.linkText&&(scope.linkText=""),null==scope.headline&&(scope.headline=""),null==scope.bodyCopy&&(scope.bodyCopy=""),null==scope.thumblist&&(scope.thumblist="false"),null==scope.date&&(scope.date=""),null==scope.blogCategory&&(scope.blogCategory=""),null==scope.quote&&(scope.quote=""),null==scope.backgroundColor&&(scope.backgroundColor=""),null==scope.logoImageUrl&&(scope.logoImageUrl=""),null==scope.linkStyle&&(scope.linkStyle=""),null==scope.layout&&(scope.layout=""),null==scope.subhead&&(scope.subhead=""),scope.youtubePattern=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]{11,11}).*$/,scope.hasSidePanel=function(){var _ref;return(null!=(_ref=scope.layout)?_ref.length:void 0)>0&&"side-panel"===scope.layout},scope.youtubeId=function(){return null!=scope.videoUrl.match(scope.youtubePattern)?scope.videoUrl.match(scope.youtubePattern)[1]:""},scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoUrl)?_ref.length:void 0)>0},scope.hasBlogCategory=function(){var _ref;return(null!=(_ref=scope.blogCategory)?_ref.length:void 0)>0},scope.hasDate=function(){var _ref;return(null!=(_ref=scope.date)?_ref.length:void 0)>0},scope.hasDetailPage=function(){var _ref;return(null!=(_ref=scope.detailPage)?_ref.length:void 0)>0&&"true"===scope.detailPage},scope.hasLinkText=function(){var _ref;return(null!=(_ref=scope.linkText)?_ref.length:void 0)>0},scope.hasLinkStyle=function(){var _ref;return(null!=(_ref=scope.linkStyle)?_ref.length:void 0)>0},scope.hasQuote=function(){var _ref;return(null!=(_ref=scope.quote)?_ref.length:void 0)>0},scope.hasHeadline=function(){var _ref;return(null!=(_ref=scope.headline)?_ref.length:void 0)>0},scope.hasBodyCopy=function(){var _ref;return(null!=(_ref=scope.bodyCopy)?_ref.length:void 0)>0},scope.hasLogoImageUrl=function(){var _ref;return(null!=(_ref=scope.logoImageUrl)?_ref.length:void 0)>0},scope.isThumblist=function(){var _ref;return(null!=(_ref=scope.thumblist)?_ref.length:void 0)>0&&"true"===scope.thumblist},scope.hasSubhead=function(){var _ref;return(null!=(_ref=scope.subhead)?_ref.length:void 0)>0},scope.getYoutubeVideoThumbnail=function(){var _ref;return scope.hasVideo()&&(null!=(_ref=scope.youtubeId())?_ref.length:void 0)>0?"http://img.youtube.com/vi/"+scope.youtubeId()+"/1.jpg":void 0},scope.getImage=function(){return scope.imageUrl||scope.getYoutubeVideoThumbnail()},scope.backgroundImageStyle=scope.hasQuote()?{background:scope.backgroundColor}:{"background-image":"url("+scope.getImage()+")"},scope.actionLinkStyle=function(){return scope.isThumblist()?"call-to-action "+scope.linkStyle:"action-link "+scope.linkStyle},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoUrl):void 0}},controller=function(){},result={restrict:"E",controller:controller,replace:!0,templateUrl:function(elem,attr){return null!=attr.thumblist&&"true"===attr.thumblist?"templates/thumb_slide.html":"templates/swipe_slide.html"},link:link,scope:{backgroundColor:"@",blogCategory:"@",bodyCopy:"@",date:"@",detailPage:"@",headline:"@",imageUrl:"@",layout:"@",linkStyle:"@",linkText:"@",linkUrl:"@",logoImageUrl:"@",quote:"@",subhead:"@",thumblist:"@",videoUrl:"@"}}}]),sfDirectives.directive("swiper",["$timeout",function($timeout){var controller,link;return link=function(scope,element,attrs){var config,slides,_ref,_ref1;return null==scope.size&&(scope.size="tall"),config=void 0,config={},config.auto=(null!=(_ref=attrs.auto)?_ref.length:void 0)>0?attrs.auto:!1,config.speed=parseInt(attrs.speed,10)||500,attrs.disableScroll&&(config.disableScroll=!!attrs.disableScroll),attrs.continuous&&(config.continuous=!!attrs.continuous),$timeout(function(){return scope.swipe=new Swipe(document.getElementById(scope.identifier),{auto:config.auto,speed:config.speed,disableScroll:config.disableScroll,continuous:config.continuous,callback:function(pos){var bullets;return bullets=$("[data-swiper='"+scope.identifier+"'] li"),bullets.removeClass("on"),bullets.eq(pos).addClass("on")}})},1e3),scope.showPaginator=function(){return null!=scope.paginator&&"true"===scope.paginator},scope.hasSize=function(){return null!=scope.size&&scope.size.length>0},scope.addSize=function(){var sizeClass;return scope.hasSize&&(sizeClass=scope.size),sizeClass},(null!=(_ref1=element.parent())?_ref1.is("p"):void 0)&&element.parent().addClass("no-container"),slides=element.children(".slide")},controller=function($scope){return $scope.next=function(){return $scope.swipe.next()},$scope.prev=function(){return $scope.swipe.prev()},$scope.slide=function(index){return $scope.swipe.slide(index)}},{restrict:"E",link:link,controller:controller,templateUrl:"templates/swipe.html",transclude:!0,replace:!0,scope:{identifier:"@",paginator:"@",size:"@"}}}]),sfDirectives.directive("tabbedNav",["$window",function($window){var link;return link=function(scope){return scope.currentTab=0,scope.navigateTo=function(tabIndex){return scope.currentTab=tabIndex,$window.location.href=scope.tabs[tabIndex].link}},{restrict:"E",link:link,templateUrl:"templates/tabbed_nav.html",transclude:!0,replace:!0,scope:{tabClass:"@",tabs:"="}}}]),sfDirectives.directive("thumblistNav",["$timeout",function($timeout){var link,template;return link=function(scope,element){var config,_ref;return config={showArrows:!1},$timeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400),scope.isFullHeight=function(){var _ref;return(null!=(_ref=scope.full)?_ref.length:void 0)>0&&"true"===scope.full},scope.thumbClasses=function(){return scope.isFullHeight()?"full thumblist thumblist-nav horizontal-only":"thumblist thumblist-nav horizontal-only"},(null!=(_ref=element.parent())?_ref.is("p"):void 0)?element.parent().addClass("no-container"):void 0},template='<div ng-class="thumbClasses()" ng-transclude></div>',{restrict:"E",link:link,template:template,transclude:!0,replace:!0,scope:{full:"@"}}}]),sfDirectives.directive("videoPlayerModal",["$window",function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(scope,element,attrs){return scope.dialogStyle={},attrs.width&&(scope.dialogStyle.width=attrs.width),attrs.height&&(scope.dialogStyle.height=attrs.height),scope.playerDiv=angular.element(element.find("div")[3]),scope.bodyDiv=document.getElementsByTagName("body")[0],scope.iframeContent="",scope.hideModal=function(){return scope.show=!1,scope.$emit("modal:hide")},scope.$watch("show",function(newVal,oldVal){return newVal&&!oldVal?(scope.iframeContent=newVal.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe width="100%" height="100%" src="http://www.youtube.com/embed/$1?autoplay=1" frameborder="0" allowfullscreen></iframe>'),scope.bodyDiv.style.overflow="hidden"):(scope.bodyDiv.style.overflow="",scope.iframeContent="")})},template:"<div class='ng-modal' ng-show='show'>\n  <div class='ng-modal-overlay' ng-click='hideModal()'></div>\n  <div class='ng-modal-dialog' ng-style='dialogStyle'>\n    <div class='ng-modal-close' ng-click='hideModal()'>X</div>\n    <div class='ng-modal-dialog-content'>\n      <div class=\"player\" ng-bind-html=\"iframeContent\"></div>\n    </div>\n  </div>\n</div>"}}]),sfDirectives.directive("worldMap",[function(){var link;return link=function(scope){return setTimeout(function(){var mapObject;return $("#world-map-gdp").vectorMap({map:"world_mill_en",markers:scope.markers.coords,markersSelectableOne:!0,zoomOnScroll:!1,series:{markers:[{attribute:"fill",scale:["#C8EEFF","#0071A4"]}]},onMarkerClick:function(event,index){var $popup,content;return content=scope.markers.meta_data[index],$popup=$("#map-popup"),$popup.fadeOut("slow",function(){return $popup.find(".content").empty().html("<span class='close' ng-click='closePopup()'>X</span><img src='"+content.thumbnail_url+"'/><div class='background-popup'><div class='text-popup'><h2>"+content.title+"</h2><span class='location'>"+content.location+"</span></span><p>"+content.text+"</p><p class='centered'><a class='read-more' href='"+content.action_target+"'>LEARN MORE</a></div></div>"),$popup.fadeIn(),$popup.find(".close").click(function(){return $popup.fadeOut()})})}}),mapObject=$("#world-map-gdp").vectorMap("get","mapObject")},1800)},{restrict:"E",link:link,template:"<section class='map'><div id='map-popup'><div class='content'></div></div><div ng-transclude></div><div id='world-map-gdp'></div></section>",transclude:!0,replace:!0,scope:{markers:"="}}
}])}.call(this),function(){var sfFilters;sfFilters=angular.module("sfFilters",["sfServices"]),sfFilters.filter("startFrom",function(){return function(input,start){return input.slice(+start)}}),sfFilters.filter("range",function(){return function(input,total){var i;for(total=parseInt(total),i=0;total>i;)input.push(i),i++;return input}}),sfFilters.filter("youtubeIframe",["$filter","Youtube",function($filter,Youtube){return function(value){var videoid;return value?(videoid=value.match(Youtube.regex()),null===videoid?"":"//www.youtube.com/embed/"+videoid[1]):value}}]),sfFilters.filter("youtubeImage",["$filter","Youtube",function($filter,Youtube){return function(value,quality){var videoid;return quality=quality||"default",value?(videoid=value.match(Youtube.regex()),null===videoid?"":"https://img.youtube.com/vi/"+videoid[1]+"/"+quality+".jpg"):value}}])}.call(this),function(){var HomePageApp,blogPagesApp,galaPageApp,legalPagesApp,mediaMentionsPagesApp,missionsPageApp,previewPageApp,programsPageApp,requiredModules,takeActionPagesApp;requiredModules=["ngRoute","ngAnimate","ngSanitize","truncate","sfControllers","sfDirectives","sfFilters","sfServices"],blogPagesApp=angular.module("blogPagesApp",requiredModules),blogPagesApp.run(function($rootScope,$location,$anchorScroll){return $rootScope.$on("$routeChangeSuccess",function(){return $anchorScroll()})}),blogPagesApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/articles",{templateUrl:"partials/articles/index.html",controller:"BlogIndexCtrl"}).when("/articles/:articleId",{templateUrl:function(params){return"api/blog_detail/"+params.articleId},controller:"BlogShowCtrl"}).otherwise({redirectTo:"/articles"})}]),galaPageApp=angular.module("galaPageApp",requiredModules),galaPageApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/gala/:tabId",{templateUrl:function(params){return"api/gala_"+params.tabId},controller:"GalaCtrl"}).otherwise({redirectTo:"/gala/overview"})}]),legalPagesApp=angular.module("legalPagesApp",requiredModules),mediaMentionsPagesApp=angular.module("mediaMentionsPagesApp",requiredModules),mediaMentionsPagesApp.run(function($rootScope,$location,$anchorScroll){return $rootScope.$on("$routeChangeSuccess",function(){return $anchorScroll()})}),mediaMentionsPagesApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/media_mentions",{templateUrl:"partials/media_mentions/index.html",controller:"MediaMentionsIndexCtrl"}).when("/press_releases/:pressReleaseId",{templateUrl:"partials/press_releases/show.html",controller:"PressReleasesShowCtrl"}).when("/media_mentions/:mediaMentionId",{templateUrl:"partials/media_mentions/show.html",controller:"MediaMentionsShowCtrl"}).otherwise({redirectTo:"/media_mentions"})}]),missionsPageApp=angular.module("missionsPageApp",requiredModules),missionsPageApp.run(function($rootScope,$location,$anchorScroll){return $rootScope.$on("$routeChangeSuccess",function(){return $anchorScroll()})}),missionsPageApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/missions",{templateUrl:"partials/missions/landing.html",controller:"MissionsPageCtrl"}).when("/highlights",{templateUrl:function(){return"partials/missions/index.html"},controller:"MissionsIndexCtrl"}).when("/missions/:articleId",{templateUrl:function(params){return"api/missions_detail/"+params.articleId},controller:"MissionsShowCtrl"}).otherwise({redirectTo:"/missions"})}]),programsPageApp=angular.module("programsPageApp",requiredModules),programsPageApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/programs/:tabId",{templateUrl:function(params){return"api/program_"+params.tabId},controller:"ProgramsCtrl"}).otherwise({redirectTo:"/programs/0"})}]),takeActionPagesApp=angular.module("takeActionPagesApp",requiredModules),takeActionPagesApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/:tabId",{templateUrl:function(params){return"api/"+params.tabId},controller:"TakeActionCtrl"}).otherwise({redirectTo:"/fundraising"})}]),HomePageApp=angular.module("homePageApp",requiredModules),HomePageApp.run(function($FB){return $FB.init("1391926457745223")}),previewPageApp=angular.module("previewPageApp",requiredModules),previewPageApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/articles/:articleId",{templateUrl:function(params){return"api/preview/"+params.articleId},controller:"PreviewShowCtrl"})}])}.call(this),function(){$(function(){var header,mask,menu,submenus,trigger;return mask=$(".mobile-menu-mask"),trigger=$(".mobile-menu-icon .icon"),menu=$(".mobile-menu"),submenus=$(".mobile-menu .main-menu > li"),header=$("header"),trigger.click(function(){return mask.toggleClass("active"),menu.toggleClass("active"),header.toggleClass("active")}),mask.click(function(){return mask.removeClass("active"),menu.removeClass("active")}),submenus.click(function(e){var submenu;return $(e.target).parents(".sub-menu").length>0?void 0:($(".mobile-menu .main-menu > li.active").not($(this)).each(function(){var submenu;return submenu=$(this),$(this).children("ul").slideToggle(200,function(){return submenu.toggleClass("active")})}),submenu=$(this),submenu.hasClass("active")?submenu.children("ul").slideToggle(200,function(){return submenu.toggleClass("active")}):(submenu.toggleClass("active"),submenu.children("ul").slideToggle(200)))}),$(window).resize(function(){return mask.removeClass("active"),menu.removeClass("active"),header.removeClass("active")})}),$(function(){var enteries,loadMore,mapAsFeed;return mapAsFeed=$(".map-as-feed-wrap"),enteries=$(".map-as-feed-wrap .entry"),loadMore=$(".map-as-feed-wrap .load-more"),enteries.eq(0).show(),enteries.eq(1).show(),enteries.length>2?(loadMore.show(),loadMore.click(function(){return enteries=$(".map-as-feed-wrap .entry:hidden"),enteries.eq(0).fadeIn(200),enteries.eq(1).fadeIn(200),$(".map-as-feed-wrap .entry:hidden").length?void 0:loadMore.hide()})):void 0}),$(window).load(function(){var blogFeed,loadMore;return blogFeed=$(".articles-list"),loadMore=$(".articles-list .load-more"),$(".next-page-trigger").length>0?(loadMore.addClass("visible"),loadMore.click(function(){return $(".next-page-trigger").first().click()})):void 0})}.call(this),function(){"use strict";var sfServices;sfServices=angular.module("sfServices",["ngResource"]),sfServices.factory("urlChooser",[function(){var env,getDetailFormat,getIndexFormat,getUrl;return env="production",getUrl=function(){switch(env){case"development":return"/local/api";case"staging":return"http://starkey.local/api";default:return"/api"}},getIndexFormat=function(){return"development"===env?"/index.json":""},getDetailFormat=function(id){return"development"===env?"":"/"+id},{getUrl:getUrl(),getIndexFormat:getIndexFormat()}}]),sfServices.factory("Article",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/articles/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("Articles",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/blog"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("LatestBlog",["$q","$http","urlChooser",function($q,$http,urlChooser){var fetchLatest;return fetchLatest=function(){var deferred,endPoint;return endPoint=""+urlChooser.getUrl+"/latest_blog",deferred=$q.defer(),$http.get(endPoint).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{fetchLatest:fetchLatest}}]),sfServices.factory("$FB",["$window",function($window){return{init:function(fbId){if(!fbId)throw"FB App Id Cannot be blank";this.fbId=fbId,$window.fbAsyncInit=function(){FB.init({appId:fbId,channelUrl:"app/channel.html",status:!0,xfbml:!0})},function(d){var id,js,ref;js=void 0,id="facebook-jssdk",ref=d.getElementsByTagName("script")[0],d.getElementById(id)||(js=d.createElement("script"),js.id=id,js.async=!0,js.src="//connect.facebook.net/en_US/all.js",ref.parentNode.insertBefore(js,ref))}(document)}}}]),sfServices.factory("FeaturedArticle",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/featured_articles"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("GalaItems",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/gala_items").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("GalaTabs",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/gala_tabs").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("HearingMissionArticle",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_articles/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("Instagram",["$http",function($http){return{fetchLatest:function(callback){var endPoint;return endPoint="https://api.instagram.com/v1/users/331318543/media/recent/?client_id=1f359684e8ab4da6ae6ff618be26c638&callback=JSON_CALLBACK&count=4",$http.jsonp(endPoint).success(function(response){return callback(response.data)})}}}]),sfServices.factory("MapMarker",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/homepage_markers"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MissionsPage",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getPage;return getPage=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_page"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getPage:getPage}}]),sfServices.factory("MissionsIndex",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred,url;return deferred=$q.defer(),url=""+urlChooser.getUrl+"/missions_highlights"+urlChooser.getIndexFormat,$http.get(url).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MissionsMapMarker",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_markers"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MediaMentionOrPressItem",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/press"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("PressRelease",["$resource","urlChooser",function($resource,urlChooser){return $resource(""+urlChooser.getUrl+"/press_releases/:pressReleaseId.json",{},{})}]),sfServices.factory("Preview",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/preview/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("MediaMention",["$resource","urlChooser",function($resource,urlChooser){return $resource(""+urlChooser.getUrl+"/media_mentions/:mediaMentionId.json",{},{})}]),sfServices.factory("ProgramContent",["$q","$http","urlChooser",function($q,$http,urlChooser){var getResource;return getResource=function(programContentId){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_"+programContentId).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getResource:getResource}}]),sfServices.factory("ProgramPartnership",["$q","$http","urlChooser",function($q,$http,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_partnerships"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("ProgramResource",["$q","$http","urlChooser",function($q,$http,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_resources"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.service("Youtube",[function(){var regex;return regex=/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/,{regex:function(){return regex}}}])}.call(this),function(){var HeaderTabNav,ProgramsPageView,TabBehavior,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};TabBehavior=function(){function TabBehavior(){this.setActiveLink=__bind(this.setActiveLink,this),this.setupListeners()}return TabBehavior.prototype.rootElement=$(document),TabBehavior.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","li",function(e){return e.preventDefault(),_this.removeActiveClass(),_this.hideTabbedContent(),_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget))})},TabBehavior.prototype.setActiveLink=function(link){var selected_tab;return selected_tab=$(link).find("a").data().contentClass,$(selected_tab).fadeIn()},TabBehavior.prototype.makeActive=function($item){return $item.addClass("active")},TabBehavior.prototype.removeActiveClass=function(){return this.rootElement.find("li").removeClass("active")},TabBehavior.prototype.hideTabbedContent=function(){return this.rootElement.find(".tab-content").hide()},TabBehavior}(),HeaderTabNav=function(_super){function HeaderTabNav(){this.hideTabbedContent(),HeaderTabNav.__super__.constructor.apply(this,arguments)}return __extends(HeaderTabNav,_super),HeaderTabNav.prototype.rootElement=$(".header-nav"),HeaderTabNav.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","ul.tabs li",function(e){var isActive;return e.preventDefault(),isActive=$(e.currentTarget).hasClass("active"),_this.removeActiveClass(),_this.hideTabbedContent(),isActive?void 0:(_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget)))})},HeaderTabNav}(TabBehavior),ProgramsPageView=function(){function ProgramsPageView(){this.setupListeners()}return ProgramsPageView.prototype.setupListeners=function(){return $(document).on("click",".become-a-provider",function(e){return e.preventDefault(),$(".programs-page .become-a-provider-container").toggleClass("hidden")})},ProgramsPageView}(),$(function(){return new HeaderTabNav,$(".programs-page").length?new ProgramsPageView:void 0})}.call(this),function(){var sfControllers;sfControllers=angular.module("sfControllers",[]),sfControllers.config(["$sceProvider",function($sceProvider){return $sceProvider.enabled(!1)}]),sfControllers.controller("globalCtrl",["$scope",function($scope){return $scope.showModal=!1,$scope.videoIframe="",$scope.showSubscribeForm=!1,$scope.$on("modal:hide",function(){return $scope.showModal=!1}),$scope.$on("modal:show",function(event,url){return $scope.showModal=!$scope.showModal,$scope.showModal===!0?$scope.videoIframe=url:void 0}),$scope.toggleSubscribeForm=function(){return $scope.showSubscribeForm=!$scope.showSubscribeForm},$scope.openSubscribeForm=function(){return $scope.showSubscribeForm=!0}}]),sfControllers.controller("HomeIndexBottomTabsCtrl",["$scope","MapMarker","FeaturedArticle",function($scope,MapMarker,FeaturedArticle){return FeaturedArticle.getIndex().then(function(data){return $scope.featuredArticlesHash=data}),MapMarker.getIndex().then(function(data){return $scope.markers=data}),$scope.currentBottomSlideTab=1,$scope.currentTabModel={},$scope.changeCurrentTab=function(tabIndex){return 0===tabIndex?$scope.currentBottomSlideTab=1:($scope.currentBottomSlideTab=2,$scope.currentTabModel=$scope.featuredArticlesHash.articles[tabIndex-1])},$scope.modalShown=!1,$scope.toggleModal=function(){return $scope.modalShown=!$scope.modalShown}}]),sfControllers.controller("BlogIndexCtrl",["$scope","$window","Articles","Pagination",function($scope,$window,Articles,Pagination){var currentPageCollection,isMobile;return $scope.articles=[],$scope.nonFeaturedArticles=[],$scope.articleFilters={featured:"false",blog_item_category:"",year:""},$scope.windowWidth=$window.innerWidth,$scope.articleCategories=[{name:"All",tag:""},{name:"News",tag:"News"},{name:"Events",tag:"Events"},{name:"Hear Now",tag:"Hear Now"},{name:"Gala",tag:"Gala"},{name:"Films",tag:"Films"},{name:"Celebrity",tag:"Celebrity"},{name:"Operation Change",tag:"Operation Change"},{name:"Hearing Missions",tag:"Hearing Missions"},{name:"Listen Carefully",tag:"Listen Carefully"}],$scope.articleYears=[{name:"Latest",tag:""},{name:"2014",tag:"2014"},{name:"2013",tag:"2013"},{name:"2012",tag:"2012"},{name:"2011",tag:"2011"},{name:"2010",tag:"2010"}],Articles.getIndex().then(function(data){return $scope.articles=data instanceof Array?data:[data],$scope.pagination=Pagination.getNew(9),$scope.nonFeaturedArticles=_.filter($scope.articles,function(article){return"false"===article.featured}),$scope.pagination.numPages=Math.ceil($scope.nonFeaturedArticles.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.nonFeaturedArticles.length/$scope.pageSize)},$scope.parseDate=function(date){return Date.parse(date)},$scope.loadMore=function(){return $scope.pagination.nextPage()},isMobile=function(){return $scope.windowWidth<768},$scope.pageStart=function(){return null!=$scope.pagination?isMobile()?0:currentPageCollection():void 0},$scope.pageEnd=function(){return null!=$scope.pagination?isMobile()?($scope.pagination.page+1)*$scope.pagination.perPage:$scope.pagination.perPage:void 0},currentPageCollection=function(){return $scope.pagination.page*$scope.pagination.perPage},$scope.isAtPaginationEnd=function(){return $scope.nonFeaturedArticles.length===$scope.pageEnd()}}]),sfControllers.controller("BlogShowCtrl",["$scope","$routeParams","$location","$sce","Articles","Article","Pagination",function($scope,$routeParams,$location,$sce,Articles,Article,Pagination){return $scope.currentPosition=$routeParams.articleId,$scope.articles=[],Articles.getIndex().then(function(data){return $scope.articles=data instanceof Array?data:[data],$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.articles.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.articles.length/$scope.pageSize)}}]),sfControllers.controller("GalaCtrl",["$scope","$routeParams","GalaItems","GalaTabs",function($scope,$routeParams,GalaItems,GalaTabs){return GalaItems.getIndex().then(function(data){return $scope.timelineItems=data}),GalaTabs.getIndex().then(function(data){return $scope.galaTabs=data})}]),sfControllers.controller("LegalPagesCtrl",["$scope","$routeParams",function($scope){return $scope.currentTab=0}]),sfControllers.controller("MediaMentionsIndexCtrl",["$scope","MediaMentionOrPressItem","Pagination",function($scope,MediaMentionOrPressItem,Pagination){return $scope.articleFilters={featured:"",year:"",type:""},$scope.articleCategories=[{name:"All Articles",tag:""},{name:"Press Release",tag:"press_release"},{name:"Media Mention",tag:"media_mention"}],$scope.articleYears=[{name:"Latest",tag:""},{name:"2014",tag:"2014"},{name:"2013",tag:"2013"},{name:"2012",tag:"2012"},{name:"2011",tag:"2011"},{name:"2010",tag:"2010"}],$scope.pressItems=[],MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("MediaMentionsShowCtrl",["$scope","$routeParams","MediaMention","MediaMentionOrPressItem","Pagination",function($scope,$routeParams,MediaMention,MediaMentionOrPressItem,Pagination){return $scope.article={prev_item:"",next_item:""},$scope.currentPosition=$routeParams.articleId,$scope.pressItems=[],MediaMention.get({mediaMentionId:$routeParams.mediaMentionId},function(pressItem){return $scope.article=pressItem instanceof Array?pressItem[0]:pressItem}),MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("MissionsPageCtrl",["$scope","MissionsMapMarker","MissionsPage",function($scope,MissionsMapMarker,MissionsPage){return $scope.currentTab=0,MissionsMapMarker.getIndex().then(function(data){return $scope.data=data}),MissionsPage.getPage().then(function(data){return $scope.missions=data,$scope.statistics=$scope.missions.hearing_mission_statistics,$scope.content_tabs=$scope.missions.content_tabs,$scope.highlights=$scope.missions.highlights}),$scope.changeTab=function(tabId){return $scope.currentTab=tabId}}]),sfControllers.controller("MissionsIndexCtrl",["$scope","Pagination","MissionsIndex",function($scope,Pagination,MissionsIndex){return $scope.highlightRegions=[],$scope.currentRegion={},$scope.missionsHighlights=[],$scope.currentCountry="",$scope.highlightsFilters={year:"",region:"",country:""},$scope.highlightYears=[{name:"Latest",tag:""}],MissionsIndex.getIndex().then(function(data){var addedYear,year,_i,_len,_ref,_results;for($scope.missionsHighlights=data.highlights,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.missionsHighlights.length/$scope.pagination.perPage),$scope.highlightRegions=data.categories,_ref=data.years,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)year=_ref[_i],addedYear={name:year,tag:year},_results.push($scope.highlightYears.push(addedYear));return _results}),$scope.hideCountryDropdown=function(){return""===$scope.highlightsFilters.region},$scope.$watch("currentRegion",function(newVal){var _ref;return(null!=newVal?null!=(_ref=newVal.region)?_ref.length:void 0:void 0)>0?($scope.highlightsFilters.region=newVal.region,$scope.highlightsFilters.country=""):$scope.highlightsFilters.region=""}),$scope.numberOfPages=function(){return Math.ceil($scope.missionsHighlights.length/$scope.pageSize)}}]),sfControllers.controller("MissionsShowCtrl",["$scope","$routeParams","$location","Articles","HearingMissionArticle","Pagination",function(){}]),sfControllers.controller("PressReleasesShowCtrl",["$scope","$routeParams","PressRelease","MediaMentionOrPressItem","Pagination",function($scope,$routeParams,PressRelease,MediaMentionOrPressItem,Pagination){return $scope.article={prev_item:"",next_item:""},$scope.currentPosition=$routeParams.pressReleaseId,$scope.pressItems=[],PressRelease.get({pressReleaseId:$routeParams.pressReleaseId},function(pressItem){return $scope.article=pressItem instanceof Array?pressItem[0]:pressItem}),MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.parseDate=function(date){var parsedDate;return parsedDate=Date.parse(date)}}]),sfControllers.controller("ProgramsCtrl",["$scope","$routeParams","Articles","ProgramPartnership","ProgramResource",function($scope,$routeParams){return $scope.currentTab=$routeParams}]),sfControllers.controller("TakeActionCtrl",["$scope","$routeParams",function($scope,$routeParams){return $scope.currentTab=$routeParams,$scope.showForm=!1,$scope.toggleForm=function(){return $scope.showForm=!$scope.showForm}}]),sfControllers.controller("PreviewShowCtrl",["$scope","$routeParams","$sce","Preview",function($scope,$routeParams,$sce,Preview){return console.debug("PreviewShowCtrl"),Preview.getDetail($routeParams.articleId).then(function(data){return $scope.article=data})}])}.call(this),function(){var sfDirectives;sfDirectives=angular.module("sfDirectives",["ngSanitize","sfFilters"]),sfDirectives.directive("accordion",[function(){var template;return template='<div class="accordion" ng-transclude></div>',{restrict:"EA",replace:!0,transclude:!0,template:template,controller:function(){var expanders;expanders=[],this.gotOpened=function(selectedExpander){angular.forEach(expanders,function(expander){selectedExpander!==expander&&(expander.showMe=!1)})},this.addExpander=function(expander){expanders.push(expander)}}}}]),sfDirectives.directive("accordionList",[function(){var link,template;return link=function(){},template='<div class="accordion-list">\n  <h3>{{title}}</h3>\n  <ul ng-transclude></ul>\n</div>',{restrict:"E",replace:!0,transclude:!0,template:template,link:link,scope:{title:"@"}}}]),sfDirectives.directive("accordionListItem",[function(){var link,template;return link=function(){},template='<li class="accordion-list-item">\n  <h3>{{title}}</h3>\n  <h3>{{subhead}}</h3>\n  <div ng-transclude></div>\n</li>',{restrict:"E",replace:!0,transclude:!0,template:template,link:link,scope:{title:"@",subhead:"@"}}}]),sfDirectives.directive("detailPage",["$timeout","$compile",function(){var link,result;return link=function(scope){return null==scope.author&&(scope.author=""),null==scope.body&&(scope.body=""),null==scope.category&&(scope.category=""),null==scope.date&&(scope.date=""),null==scope.detailPageType&&(scope.detailPageType=""),null==scope.hasRelatedPosts&&(scope.hasRelatedPosts=""),null==scope.headerImageUrl&&(scope.headerImageUrl=""),null==scope.previousPageId&&(scope.previousPageId=""),null==scope.nextPageId&&(scope.nextPageId=""),null==scope.shareThis&&(scope.shareThis=""),null==scope.subhead&&(scope.subhead=""),null==scope.thumbnailImageUrl&&(scope.thumbnailImageUrl=""),null!=scope.title?scope.title:scope.title=""},result={restrict:"E",replace:!0,templateUrl:function(){return"templates/blog_detail_page.html"},link:link,scope:{author:"@",body:"@",category:"@",date:"@",detailPageType:"@",hasRelatedPosts:"@",headerImageUrl:"@",previousPageId:"@",nextPageId:"@",shareThis:"@",subhead:"@",thumbnailImageUrl:"@",title:"@"}}}]),sfDirectives.directive("expander",[function(){var template;return template='<div>\n  <a class="title" href ng-click="toggle()" ng-class="{active: showMe==true}">{{title}} <span class="arrow">&gt;</span></a>\n  <div class="body reveal" ng-show="showMe" ng-transclude>\n  </div>\n</div>',{restrict:"EA",replace:!0,transclude:!0,require:"^?accordion",template:template,link:function(scope,element,attrs,accordionController){var toggle;scope.showMe=!1,accordionController.addExpander(scope),scope.toggle=toggle=function(){scope.showMe=!scope.showMe,accordionController.gotOpened(scope)}},scope:{title:"@"}}}]),sfDirectives.directive("dynamic",["$compile",function($compile){return{restrict:"A",replace:!0,link:function(scope,element,attrs){return scope.$watch(attrs.dynamic,function(html){return element.html(html),$compile(element.contents())(scope)})}}}]),sfDirectives.directive("facebook",["$timeout","$http",function($timeout,$http){return{restrict:"E",scope:{url:"@",caption:"@"},replace:!0,template:'<div class="facebook-fans centered">\n    <h1>{{shares}} <strong>fans</strong></h1>\n  <p class="read-more"><a href>Like us â†’</a></p>\n</div>',link:function(scope,element){return scope.shares=0,$http.get("https://api.facebook.com/method/links.getStats?urls="+scope.url+"&format=json").success(function(res){return scope.shares=res[0].share_count}).error(function(){return scope.shares=0}),$timeout(function(){return element.bind("click",function(){return FB.ui({method:"feed",name:"Facebook shares",link:scope.url,caption:scope.caption})})})}}}]),sfDirectives.directive("galaThumblistNav",["$http","$sce",function($http){var config,controller,link;return config={},link=function(scope){return setTimeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400)},controller=function($scope){return $scope.getItem=function(url){return $http.get("/api/gala_item/"+url).then(function(response){return $scope.rawHtml=response.data})}},{controller:controller,restrict:"E",link:link,templateUrl:"templates/gala_thumblist_nav.html",replace:!0,scope:{items:"="}}}]),sfDirectives.directive("gallery",["$timeout",function($timeout){var link,template;return link=function(scope,element){var config,_ref;return null==scope.slides&&(scope.slides=1),scope.isThumblist=function(){return scope.slides>1},config={showArrows:!0},scope.isThumblist()&&$timeout(function(){return scope.pane=$(".gallery"),scope.pane.jScrollPane(config)},1400),scope.isFullHeight=function(){var _ref;return(null!=(_ref=scope.full)?_ref.length:void 0)>0&&"true"===scope.full},scope.galleryClasses=function(){return scope.isThumblist()?"gallery":"single-image-gallery"},(null!=(_ref=element.parent())?_ref.is("p"):void 0)?element.parent().addClass("no-container"):void 0},template='<div ng-class="galleryClasses()" ng-transclude></div>',{restrict:"E",link:link,template:template,transclude:!0,replace:!0,scope:{slides:"@"}}}]),sfDirectives.directive("gallerySlide",[function(){var link,result;return link=function(scope){return null==scope.imageUrl&&(scope.imageUrl=""),null==scope.videoUrl&&(scope.videoUrl=""),scope.youtubePattern=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]{11,11}).*$/,scope.youtubeId=function(){return scope.videoUrl.match(scope.youtubePattern)[1]
},scope.hasImageUrl=function(){var _ref;return(null!=(_ref=scope.imageUrl)?_ref.length:void 0)>0},scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoUrl)?_ref.length:void 0)>0},scope.getYoutubeVideoThumbnail=function(){return scope.hasVideo()?"http://img.youtube.com/vi/"+scope.youtubeId()+"/1.jpg":void 0},scope.getImage=function(){return scope.imageUrl||scope.getYoutubeVideoThumbnail()},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoUrl):void 0},scope.slideType=function(){return scope.hasVideo()?"links_to_video":"plain_image"},scope.backgroundImageStyle={"background-image":"url("+scope.getImage()+")","background-size":"cover"}},result={restrict:"E",replace:!0,templateUrl:"templates/gallery_slide.html",link:link,scope:{imageUrl:"@",videoUrl:"@"}}}]),sfDirectives.directive("homeThumblistNav",[function(){var link;return link=function(scope){var config;return config={showArrows:!1},setTimeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400)},{restrict:"E",link:link,templateUrl:"templates/home_thumblist_nav.html",replace:!0,scope:{featured:"=",clickaction:"="}}}]),sfDirectives.directive("instagramGallery",["$http","Instagram",function($http,Instagram){return{restrict:"E",scope:{},replace:!0,template:"<ul class='thumbs'>\n  <li ng-repeat=\"p in pics\">\n    <a href=\"{{p.link}}\" target=\"_blank\" ng-style=\"{'background-image': 'url(' + p.images.thumbnail.url + ')'}\">&nbsp;</a>\n  </li>\n</ul>\n",link:function(scope){return scope.pics=[],Instagram.fetchLatest(function(data){return scope.pics=data})}}}]),sfDirectives.directive("latestBlogPost",["$http","LatestBlog",function($http,LatestBlog){return{restrict:"E",scope:{},replace:!0,template:'<div>\n  <h4>From our blog</h4>\n  <p>{{article.title}}</p>\n  <p>{{article.date}}</p>\n  <p class="read-more"><a href="/blog#articles/{{article.id}}">Check out our blog &rarr;</a></p>\n</div>',link:function(scope){return scope.article={},LatestBlog.fetchLatest().then(function(data){return scope.article=data})}}}]),sfDirectives.directive("missionsMap",["$timeout",function($timeout){var controller,link;return link=function(scope){return scope.worldMapObject={},scope.usMapObject={},scope.worldMapZIndex=1,scope.usMapZIndex=0,scope.currentContinent={},scope.currentCountry={},scope.selectedList={},scope.greetingFlag=!1,scope.mapConfig={zoomOnScroll:!1,backgroundColor:"none",regionStyle:{selected:{fill:"#ffad20"}},focusOn:{x:.5,y:.5,scale:.5}},scope.worldMapConfig=_.extend({map:"world_mill_en"},scope.mapConfig),scope.usMapConfig=_.extend({map:"us_aea_en"},scope.mapConfig),scope.selectTopLevelList=function(continent){return scope.selectedList=continent,scope.greetingFlag=!0},scope.initializeMaps=function(){return $timeout(function(){return $("#missions-world-map").vectorMap(scope.worldMapConfig),scope.worldMapObject=$("#missions-world-map").vectorMap("get","mapObject"),$("#missions-us-map").vectorMap(scope.usMapConfig),scope.usMapObject=$("#missions-us-map").vectorMap("get","mapObject")},1800)},scope.hasContinentAndCountry=function(){return scope.hasContinent()||scope.hasCountry()},scope.hasContinent=function(){var _ref;return null!=(null!=(_ref=scope.currentContinent)?_ref.name:void 0)},scope.hasCountry=function(){var _ref;return null!=(null!=(_ref=scope.currentCountry)?_ref.name:void 0)},scope.countryClass=function(name){return(null!=name?name.length:void 0)?"US"===name?"states":"countries":void 0},scope.countryOrState=function(){return scope.hasContinent()?scope.countryClass(scope.currentContinent.name):void 0},scope.highlightContinentRegions=function(continent,mapObj){var country,countryCodes,_i,_len,_ref;for(scope.currentContinent=continent,scope.currentCountry={},countryCodes=[],_ref=continent.countries_visited,_i=0,_len=_ref.length;_len>_i;_i++)country=_ref[_i],countryCodes.push(country.abbreviation);return countryCodes.length>0?(mapObj.clearSelectedRegions(),mapObj.setFocus(countryCodes,.2),mapObj.setSelectedRegions(countryCodes)):void 0},scope.highlightCountryRegion=function(country,mapObj){return scope.currentCountry=country,mapObj.clearSelectedRegions(),mapObj.setFocus(country.abbreviation),mapObj.setSelectedRegions(country.abbreviation)},scope.bringUSMapToFront=function(flag,continent){return flag===!0?(scope.worldMapZIndex=0,scope.usMapZIndex=1,scope.highlightContinentRegions(continent,scope.usMapObject)):(scope.worldMapZIndex=1,scope.usMapZIndex=0,scope.highlightContinentRegions(continent,scope.worldMapObject))},scope.greetingClicked=function(){return scope.greetingFlag=!0},scope.initializeMaps()},controller=function($scope){return $scope.showContinent=function(continent){return"US"===continent.name?$scope.bringUSMapToFront(!0,continent):$scope.bringUSMapToFront(!1,continent)},$scope.showCountry=function(country,continent){var countryCode,_ref;return countryCode=country.abbreviation,(null!=countryCode?countryCode.length:void 0)>0&&(null!=(_ref=country.total_hearing_aids_provided)?_ref.length:void 0)>0?"US"===continent.name?($scope.bringUSMapToFront(!0,continent),$scope.highlightCountryRegion(country,$scope.usMapObject)):($scope.bringUSMapToFront(!1,continent),$scope.highlightCountryRegion(country,$scope.worldMapObject)):void 0}},{restrict:"E",link:link,controller:controller,templateUrl:"templates/missions_map.html",replace:!0,scope:{data:"="}}}]),sfDirectives.directive("pageTile",[function(){var link,result;return link=function(scope){return null==scope.feedUrl&&(scope.feedUrl=""),null==scope.title&&(scope.title=""),null==scope.date&&(scope.date=""),null==scope.year&&(scope.year=""),null==scope.detailPage&&(scope.detailPage=""),null==scope.type&&(scope.type=""),null==scope.featured&&(scope.featured=""),null==scope.headerImageUrl&&(scope.headerImageUrl=""),null==scope.logoImageUrl&&(scope.logoImageUrl=""),null==scope.quote&&(scope.quote=""),null==scope.callToActionText&&(scope.callToActionText=""),null==scope.callToActionLink&&(scope.callToActionLink=""),null==scope.videoLink&&(scope.videoLink=""),scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoLink)?_ref.length:void 0)>0},scope.getCategory=function(){switch(scope.type){case"press_release":return"Press Release";case"media_mention":return"Media Mention";default:return scope.category}},scope.parseDate=function(date){return Date.parse(date)},scope.linkByType=function(){var _ref,_ref1;return null!=scope.type?"media_mention"===scope.type?(null!=(_ref=scope.videoLink)?_ref.length:void 0)>0?"media_mention_with_video":(null!=(_ref1=scope.detailPage)?_ref1.length:void 0)>0&&"true"===scope.detailPage?"media_mention_with_detail_page":"media_mention":scope.type:"default"},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoLink):void 0}},result={restrict:"E",replace:!0,templateUrl:"templates/page_tile.html",link:link,scope:{id:"@",callToActionLink:"@",callToActionText:"@",category:"@",date:"@",detailPage:"@",featured:"@",feedUrl:"@",headerImageUrl:"@",logoImageUrl:"@",quote:"@",title:"@",type:"@",videoLink:"@",year:"@"}}}]),sfDirectives.factory("Pagination",function(){var pagination;return pagination={},pagination.getNew=function(perPage){var paginator;return perPage=void 0===perPage?5:perPage,paginator={numPages:1,perPage:perPage,page:0},paginator.prevPage=function(){return paginator.page>0?paginator.page-=1:void 0},paginator.nextPage=function(){return paginator.page<paginator.numPages-1?paginator.page+=1:void 0},paginator.toPageId=function(id){return id>=0&&id<=paginator.numPages-1?paginator.page=id:void 0},paginator},pagination}),sfDirectives.directive("panelTab",[function(){var link;return link=function(scope){return scope.hasVideo=function(){var _ref;return null!=(null!=(_ref=scope.featured)?_ref.video_link_url:void 0)},scope.displayInModalIfVideo=function(){return scope.$emit("modal:show",scope.featured.video_link_url)}},{restrict:"E",templateUrl:"templates/panel_tab.html",replace:!0,link:link,scope:{featured:"="}}}]),sfDirectives.directive("scrollToPosition",[function(){return{restrict:"A",link:function(scope,element,attrs){var idToScrollTo;return idToScrollTo=attrs.scrollToPosition,element.on("click",function(){return $("body").animate({scrollTop:$("#"+idToScrollTo).offset().top},"slow")})},scope:{}}}]),sfDirectives.directive("slide",[function(){var controller,link,result;return link=function(scope){return null==scope.detailPage&&(scope.detailPage=""),null==scope.imageUrl&&(scope.imageUrl=""),null==scope.videoUrl&&(scope.videoUrl=""),null==scope.linkUrl&&(scope.linkUrl=""),null==scope.linkText&&(scope.linkText=""),null==scope.headline&&(scope.headline=""),null==scope.bodyCopy&&(scope.bodyCopy=""),null==scope.thumblist&&(scope.thumblist="false"),null==scope.date&&(scope.date=""),null==scope.blogCategory&&(scope.blogCategory=""),null==scope.quote&&(scope.quote=""),null==scope.backgroundColor&&(scope.backgroundColor=""),null==scope.logoImageUrl&&(scope.logoImageUrl=""),null==scope.linkStyle&&(scope.linkStyle=""),null==scope.layout&&(scope.layout=""),null==scope.subhead&&(scope.subhead=""),scope.youtubePattern=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]{11,11}).*$/,scope.hasSidePanel=function(){var _ref;return(null!=(_ref=scope.layout)?_ref.length:void 0)>0&&"side-panel"===scope.layout},scope.youtubeId=function(){return null!=scope.videoUrl.match(scope.youtubePattern)?scope.videoUrl.match(scope.youtubePattern)[1]:""},scope.hasVideo=function(){var _ref;return(null!=(_ref=scope.videoUrl)?_ref.length:void 0)>0},scope.hasBlogCategory=function(){var _ref;return(null!=(_ref=scope.blogCategory)?_ref.length:void 0)>0},scope.hasDate=function(){var _ref;return(null!=(_ref=scope.date)?_ref.length:void 0)>0},scope.hasDetailPage=function(){var _ref;return(null!=(_ref=scope.detailPage)?_ref.length:void 0)>0&&"true"===scope.detailPage},scope.hasLinkText=function(){var _ref;return(null!=(_ref=scope.linkText)?_ref.length:void 0)>0},scope.hasLinkStyle=function(){var _ref;return(null!=(_ref=scope.linkStyle)?_ref.length:void 0)>0},scope.hasQuote=function(){var _ref;return(null!=(_ref=scope.quote)?_ref.length:void 0)>0},scope.hasHeadline=function(){var _ref;return(null!=(_ref=scope.headline)?_ref.length:void 0)>0},scope.hasBodyCopy=function(){var _ref;return(null!=(_ref=scope.bodyCopy)?_ref.length:void 0)>0},scope.hasLogoImageUrl=function(){var _ref;return(null!=(_ref=scope.logoImageUrl)?_ref.length:void 0)>0},scope.isThumblist=function(){var _ref;return(null!=(_ref=scope.thumblist)?_ref.length:void 0)>0&&"true"===scope.thumblist},scope.hasSubhead=function(){var _ref;return(null!=(_ref=scope.subhead)?_ref.length:void 0)>0},scope.getYoutubeVideoThumbnail=function(){var _ref;return scope.hasVideo()&&(null!=(_ref=scope.youtubeId())?_ref.length:void 0)>0?"http://img.youtube.com/vi/"+scope.youtubeId()+"/1.jpg":void 0},scope.getImage=function(){return scope.imageUrl||scope.getYoutubeVideoThumbnail()},scope.backgroundImageStyle=scope.hasQuote()?{background:scope.backgroundColor}:{"background-image":"url("+scope.getImage()+")"},scope.actionLinkStyle=function(){return scope.isThumblist()?"call-to-action "+scope.linkStyle:"action-link "+scope.linkStyle},scope.displayInModalIfVideo=function(){return scope.hasVideo()?scope.$emit("modal:show",scope.videoUrl):void 0}},controller=function(){},result={restrict:"E",controller:controller,replace:!0,templateUrl:function(elem,attr){return null!=attr.thumblist&&"true"===attr.thumblist?"templates/thumb_slide.html":"templates/swipe_slide.html"},link:link,scope:{backgroundColor:"@",blogCategory:"@",bodyCopy:"@",date:"@",detailPage:"@",headline:"@",imageUrl:"@",layout:"@",linkStyle:"@",linkText:"@",linkUrl:"@",logoImageUrl:"@",quote:"@",subhead:"@",thumblist:"@",videoUrl:"@"}}}]),sfDirectives.directive("swiper",["$timeout",function($timeout){var controller,link;return link=function(scope,element,attrs){var config,slides,_ref,_ref1;return null==scope.size&&(scope.size="tall"),config=void 0,config={},config.auto=(null!=(_ref=attrs.auto)?_ref.length:void 0)>0?attrs.auto:!1,config.speed=parseInt(attrs.speed,10)||500,attrs.disableScroll&&(config.disableScroll=!!attrs.disableScroll),attrs.continuous&&(config.continuous=!!attrs.continuous),$timeout(function(){return scope.swipe=new Swipe(document.getElementById(scope.identifier),{auto:config.auto,speed:config.speed,disableScroll:config.disableScroll,continuous:config.continuous,callback:function(pos){var bullets;return bullets=$("[data-swiper='"+scope.identifier+"'] li"),bullets.removeClass("on"),bullets.eq(pos).addClass("on")}})},1e3),scope.showPaginator=function(){return null!=scope.paginator&&"true"===scope.paginator},scope.hasSize=function(){return null!=scope.size&&scope.size.length>0},scope.addSize=function(){var sizeClass;return scope.hasSize&&(sizeClass=scope.size),sizeClass},(null!=(_ref1=element.parent())?_ref1.is("p"):void 0)&&element.parent().addClass("no-container"),slides=element.children(".slide")},controller=function($scope){return $scope.next=function(){return $scope.swipe.next()},$scope.prev=function(){return $scope.swipe.prev()},$scope.slide=function(index){return $scope.swipe.slide(index)}},{restrict:"E",link:link,controller:controller,templateUrl:"templates/swipe.html",transclude:!0,replace:!0,scope:{identifier:"@",paginator:"@",size:"@"}}}]),sfDirectives.directive("tabbedNav",["$window",function($window){var link;return link=function(scope){return scope.currentTab=0,scope.navigateTo=function(tabIndex){return scope.currentTab=tabIndex,$window.location.href=scope.tabs[tabIndex].link}},{restrict:"E",link:link,templateUrl:"templates/tabbed_nav.html",transclude:!0,replace:!0,scope:{tabClass:"@",tabs:"="}}}]),sfDirectives.directive("thumblistNav",["$timeout",function($timeout){var link,template;return link=function(scope,element){var config,_ref;return config={showArrows:!1},$timeout(function(){return scope.pane=$(".thumblist-nav"),scope.pane.jScrollPane(config)},1400),scope.isFullHeight=function(){var _ref;return(null!=(_ref=scope.full)?_ref.length:void 0)>0&&"true"===scope.full},scope.thumbClasses=function(){return scope.isFullHeight()?"full thumblist thumblist-nav horizontal-only":"thumblist thumblist-nav horizontal-only"},(null!=(_ref=element.parent())?_ref.is("p"):void 0)?element.parent().addClass("no-container"):void 0},template='<div ng-class="thumbClasses()" ng-transclude></div>',{restrict:"E",link:link,template:template,transclude:!0,replace:!0,scope:{full:"@"}}}]),sfDirectives.directive("videoPlayerModal",["$window",function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(scope,element,attrs){return scope.dialogStyle={},attrs.width&&(scope.dialogStyle.width=attrs.width),attrs.height&&(scope.dialogStyle.height=attrs.height),scope.playerDiv=angular.element(element.find("div")[3]),scope.bodyDiv=document.getElementsByTagName("body")[0],scope.iframeContent="",scope.hideModal=function(){return scope.show=!1,scope.$emit("modal:hide")},scope.$watch("show",function(newVal,oldVal){return newVal&&!oldVal?(scope.iframeContent=newVal.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe width="100%" height="100%" src="http://www.youtube.com/embed/$1?autoplay=1" frameborder="0" allowfullscreen></iframe>'),scope.bodyDiv.style.overflow="hidden"):(scope.bodyDiv.style.overflow="",scope.iframeContent="")})},template:"<div class='ng-modal' ng-show='show'>\n  <div class='ng-modal-overlay' ng-click='hideModal()'></div>\n  <div class='ng-modal-dialog' ng-style='dialogStyle'>\n    <div class='ng-modal-close' ng-click='hideModal()'>X</div>\n    <div class='ng-modal-dialog-content'>\n      <div class=\"player\" ng-bind-html=\"iframeContent\"></div>\n    </div>\n  </div>\n</div>"}}]),sfDirectives.directive("worldMap",[function(){var link;return link=function(scope){return setTimeout(function(){var mapObject;return $("#world-map-gdp").vectorMap({map:"world_mill_en",markers:scope.markers.coords,markersSelectableOne:!0,zoomOnScroll:!1,series:{markers:[{attribute:"fill",scale:["#C8EEFF","#0071A4"]}]},onMarkerClick:function(event,index){var $popup,content;return content=scope.markers.meta_data[index],$popup=$("#map-popup"),$popup.fadeOut("slow",function(){return $popup.find(".content").empty().html("<span class='close' ng-click='closePopup()'>X</span><img src='"+content.thumbnail_url+"'/><div class='background-popup'><div class='text-popup'><h2>"+content.title+"</h2><span class='location'>"+content.location+"</span></span><p>"+content.text+"</p><p class='centered'><a class='read-more' href='"+content.action_target+"'>LEARN MORE</a></div></div>"),$popup.fadeIn(),$popup.find(".close").click(function(){return $popup.fadeOut()})})}}),mapObject=$("#world-map-gdp").vectorMap("get","mapObject")},1800)},{restrict:"E",link:link,template:"<section class='map'><div id='map-popup'><div class='content'></div></div><div ng-transclude></div><div id='world-map-gdp'></div></section>",transclude:!0,replace:!0,scope:{markers:"="}}}])}.call(this),function(){var sfFilters;sfFilters=angular.module("sfFilters",["sfServices"]),sfFilters.filter("startFrom",function(){return function(input,start){return input.slice(+start)}}),sfFilters.filter("range",function(){return function(input,total){var i;for(total=parseInt(total),i=0;total>i;)input.push(i),i++;return input}}),sfFilters.filter("youtubeIframe",["$filter","Youtube",function($filter,Youtube){return function(value){var videoid;return value?(videoid=value.match(Youtube.regex()),null===videoid?"":"//www.youtube.com/embed/"+videoid[1]):value}}]),sfFilters.filter("youtubeImage",["$filter","Youtube",function($filter,Youtube){return function(value,quality){var videoid;return quality=quality||"default",value?(videoid=value.match(Youtube.regex()),null===videoid?"":"https://img.youtube.com/vi/"+videoid[1]+"/"+quality+".jpg"):value}}])}.call(this),function(){"use strict";var sfServices;sfServices=angular.module("sfServices",["ngResource"]),sfServices.factory("urlChooser",[function(){var env,getDetailFormat,getIndexFormat,getUrl;return env="production",getUrl=function(){switch(env){case"development":return"/local/api";case"staging":return"http://starkey.local/api";default:return"/api"}},getIndexFormat=function(){return"development"===env?"/index.json":""},getDetailFormat=function(id){return"development"===env?"":"/"+id},{getUrl:getUrl(),getIndexFormat:getIndexFormat()}}]),sfServices.factory("Article",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/articles/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("Articles",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/blog"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("LatestBlog",["$q","$http","urlChooser",function($q,$http,urlChooser){var fetchLatest;return fetchLatest=function(){var deferred,endPoint;return endPoint=""+urlChooser.getUrl+"/latest_blog",deferred=$q.defer(),$http.get(endPoint).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{fetchLatest:fetchLatest}}]),sfServices.factory("$FB",["$window",function($window){return{init:function(fbId){if(!fbId)throw"FB App Id Cannot be blank";this.fbId=fbId,$window.fbAsyncInit=function(){FB.init({appId:fbId,channelUrl:"app/channel.html",status:!0,xfbml:!0})},function(d){var id,js,ref;js=void 0,id="facebook-jssdk",ref=d.getElementsByTagName("script")[0],d.getElementById(id)||(js=d.createElement("script"),js.id=id,js.async=!0,js.src="//connect.facebook.net/en_US/all.js",ref.parentNode.insertBefore(js,ref))}(document)}}}]),sfServices.factory("FeaturedArticle",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/featured_articles"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("GalaItems",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/gala_items").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("GalaTabs",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/gala_tabs").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("HearingMissionArticle",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_articles/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("Instagram",["$http",function($http){return{fetchLatest:function(callback){var endPoint;return endPoint="https://api.instagram.com/v1/users/331318543/media/recent/?client_id=1f359684e8ab4da6ae6ff618be26c638&callback=JSON_CALLBACK&count=4",$http.jsonp(endPoint).success(function(response){return callback(response.data)})}}}]),sfServices.factory("MapMarker",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/homepage_markers"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MissionsPage",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getPage;return getPage=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_page"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getPage:getPage}}]),sfServices.factory("MissionsIndex",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred,url;return deferred=$q.defer(),url=""+urlChooser.getUrl+"/missions_highlights"+urlChooser.getIndexFormat,$http.get(url).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MissionsMapMarker",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/missions_markers"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MediaMentionOrPressItem",["$q","$http","$resource","urlChooser",function($q,$http,$resource,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/press"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("PressRelease",["$resource","urlChooser",function($resource,urlChooser){return $resource(""+urlChooser.getUrl+"/press_releases/:pressReleaseId.json",{},{})}]),sfServices.factory("Preview",["$q","$http","urlChooser",function($q,$http,urlChooser){var getDetail;return getDetail=function(id){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/preview/"+id).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getDetail:getDetail}}]),sfServices.factory("MediaMention",["$resource","urlChooser",function($resource,urlChooser){return $resource(""+urlChooser.getUrl+"/media_mentions/:mediaMentionId.json",{},{})}]),sfServices.factory("ProgramContent",["$q","$http","urlChooser",function($q,$http,urlChooser){var getResource;return getResource=function(programContentId){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_"+programContentId).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getResource:getResource}}]),sfServices.factory("ProgramPartnership",["$q","$http","urlChooser",function($q,$http,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_partnerships"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("ProgramResource",["$q","$http","urlChooser",function($q,$http,urlChooser){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get(""+urlChooser.getUrl+"/program_resources"+urlChooser.getIndexFormat).success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.service("Youtube",[function(){var regex;return regex=/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/,{regex:function(){return regex}}}])}.call(this),function(){var HeaderTabNav,ProgramsPageView,TabBehavior,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};TabBehavior=function(){function TabBehavior(){this.setActiveLink=__bind(this.setActiveLink,this),this.setupListeners()}return TabBehavior.prototype.rootElement=$(document),TabBehavior.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","li",function(e){return e.preventDefault(),_this.removeActiveClass(),_this.hideTabbedContent(),_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget))})},TabBehavior.prototype.setActiveLink=function(link){var selected_tab;return selected_tab=$(link).find("a").data().contentClass,$(selected_tab).fadeIn()},TabBehavior.prototype.makeActive=function($item){return $item.addClass("active")},TabBehavior.prototype.removeActiveClass=function(){return this.rootElement.find("li").removeClass("active")},TabBehavior.prototype.hideTabbedContent=function(){return this.rootElement.find(".tab-content").hide()},TabBehavior}(),HeaderTabNav=function(_super){function HeaderTabNav(){this.hideTabbedContent(),HeaderTabNav.__super__.constructor.apply(this,arguments)}return __extends(HeaderTabNav,_super),HeaderTabNav.prototype.rootElement=$(".header-nav"),HeaderTabNav.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","ul.tabs li",function(e){var isActive;return e.preventDefault(),isActive=$(e.currentTarget).hasClass("active"),_this.removeActiveClass(),_this.hideTabbedContent(),isActive?void 0:(_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget)))})},HeaderTabNav}(TabBehavior),ProgramsPageView=function(){function ProgramsPageView(){this.setupListeners()}return ProgramsPageView.prototype.setupListeners=function(){return $(document).on("click",".become-a-provider",function(e){return e.preventDefault(),$(".programs-page .become-a-provider-container").toggleClass("hidden")})},ProgramsPageView}(),$(function(){return new HeaderTabNav,$(".programs-page").length?new ProgramsPageView:void 0})}.call(this),function(){$(function(){var header,mask,menu,submenus,trigger;return mask=$(".mobile-menu-mask"),trigger=$(".mobile-menu-icon .icon"),menu=$(".mobile-menu"),submenus=$(".mobile-menu .main-menu > li"),header=$("header"),trigger.click(function(){return mask.toggleClass("active"),menu.toggleClass("active"),header.toggleClass("active")}),mask.click(function(){return mask.removeClass("active"),menu.removeClass("active")}),submenus.click(function(e){var submenu;return $(e.target).parents(".sub-menu").length>0?void 0:($(".mobile-menu .main-menu > li.active").not($(this)).each(function(){var submenu;return submenu=$(this),$(this).children("ul").slideToggle(200,function(){return submenu.toggleClass("active")})}),submenu=$(this),submenu.hasClass("active")?submenu.children("ul").slideToggle(200,function(){return submenu.toggleClass("active")}):(submenu.toggleClass("active"),submenu.children("ul").slideToggle(200)))}),$(window).resize(function(){return mask.removeClass("active"),menu.removeClass("active"),header.removeClass("active")})}),$(function(){var enteries,loadMore,mapAsFeed;return mapAsFeed=$(".map-as-feed-wrap"),enteries=$(".map-as-feed-wrap .entry"),loadMore=$(".map-as-feed-wrap .load-more"),enteries.eq(0).show(),enteries.eq(1).show(),enteries.length>2?(loadMore.show(),loadMore.click(function(){return enteries=$(".map-as-feed-wrap .entry:hidden"),enteries.eq(0).fadeIn(200),enteries.eq(1).fadeIn(200),$(".map-as-feed-wrap .entry:hidden").length?void 0:loadMore.hide()})):void 0}),$(window).load(function(){var blogFeed,loadMore;return blogFeed=$(".articles-list"),loadMore=$(".articles-list .load-more"),$(".next-page-trigger").length>0?(loadMore.addClass("visible"),loadMore.click(function(){return $(".next-page-trigger").first().click()})):void 0})}.call(this);